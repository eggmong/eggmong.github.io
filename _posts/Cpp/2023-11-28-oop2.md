---
title:  "ê°œì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë° (OOP) 2"

categories:
  - Cpp
tags:
  - [Cpp, C++, OOP]

toc: true
toc_sticky: true
 
date: 2023-11-28
last_modified_at: 2023-11-28
---

<br>

> ğŸ¤¯ ì–¸ë¦¬ì–¼ì„ í•˜ê¸° ìœ„í•´ C++ ê¸°ì–µ ë˜ì‚´ë¦¬ê¸° í”„ë¡œì íŠ¸

# ê°œì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë° (OOP) 2

## 1. ë³µì‚¬ ìƒì„±ì

```cpp
// Vector.h
class Vector
{
    public:
        Vector(const Vector& other);    // <- ë°›ëŠ” ë§¤ê°œë³€ìˆ˜ê°€ ì´ëŸ¬ë©´ ë³µì‚¬ ìƒì„±ìë‹¤

        // ë¬´ìŠ¨ ì†Œë¦¬ëƒë©´
        // constí•˜ê³ , ë‚˜ ìì‹  í´ë˜ìŠ¤. ë˜‘ê°™ì€ í´ë˜ìŠ¤ì— ìˆëŠ” ê°œì²´ë¥¼ í•˜ë‚˜ ë°›ëŠ”ê±°.
        // ì €ê±´ ìƒì„±ìì´ë¯€ë¡œ ë‚˜ ìì‹ ì„ ëŒ€ì…í•  ìˆœ ì—†ìŒ. ìƒì„±ë˜ëŠ” ë„ì¤‘ì´ë¯€ë¡œ. ì¡´ì¬ë„ ì•ˆí•˜ë‹ˆê¹Œ.
        // ê°™ì€ í´ë˜ìŠ¤ì— ìˆëŠ” ë‹¤ë¥¸ ê°œì²´ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ì„œ ìƒì„±í•˜ëŠ” ê²ƒ.

    private:
        int mX;
        int mY;
};

// Vector.cpp
Vector::Vector(const Vector& other)
    : mX(other.mX), mY(other.mY)
{
}
```

- ê°™ì€ í´ë˜ìŠ¤ì— ì†í•œ ë‹¤ë¥¸ ê°œì²´ë¥¼ ì´ìš©í•˜ì—¬ ìƒˆë¡œìš´ ê°œì²´ë¥¼ ì´ˆê¸°í™”í•œë‹¤ëŠ” ê²ƒ
  - ê°™ì€ í¬ê¸°, ê°™ì€ ë°ì´í„°
  - `<class-name> (const <class-name>&);`

```cpp
Vector(const Vector& other);

Vector a;       // ë§¤ê°œë³€ìˆ˜ ì—†ëŠ” ìƒì„±ìë¥¼ í˜¸ì¶œ
Vector b(a);    // ë³µì‚¬ ìƒì„±ì í˜¸ì¶œ
```

- ì½”ë“œì— ë³µì‚¬ ìƒì„±ìê°€ ì—†ëŠ” ê²½ìš°, ì»´íŒŒì¼ëŸ¬ê°€ ì•”ì‹œì  ë³µì‚¬ ìƒì„±ìë¥¼ ìë™ ìƒì„±
- ì•”ì‹œì  ë³µì‚¬ ìƒì„±ìëŠ” ì–•ì€ ë³µì‚¬ë¥¼ ìˆ˜í–‰
  - ë©¤ë²„ë³„ ë³µì‚¬
  - ê° ë©¤ë²„ì˜ ê°’ì„ ë³µì‚¬í•¨.
  - ê°œì²´ì¸ ë©¤ë²„ë³€ìˆ˜ëŠ” ê·¸ ê°œì²´ì˜ ë³µì‚¬ ìƒì„±ìê°€ í˜¸ì¶œë¨

- í´ë˜ìŠ¤ ì•ˆì—ì„œ ë™ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê³  ìˆë‹¤ë©´? ì–•ì€ ë³µì‚¬ê°€ ìœ„í—˜í•  ê°€ëŠ¥ì„±ì´ ë†’ìŒ
- ì§ì ‘ ë³µì‚¬ ìƒì„±ìë¥¼ ë§Œë“¤ì–´ì„œ ê¹Šì€ ë³µì‚¬ë¥¼ í•  ê²ƒ
  - í¬ì¸í„° ë³€ìˆ˜ê°€ ê°€ë¦¬í‚¤ëŠ” ì‹¤ì œ ë°ì´í„°ê¹Œì§€ë„ ë³µì‚¬
  
  ```cpp
  // ê¹Šì€ ë³µì‚¬

  ClassRecord::ClassRecord(const ClassRecord& other)
    : mCount(other.mCount)
  {
    mScores = new int[mCount];
    memcpy(mScores, other.mScores, mCount * sizeof(int));
  }
  ```

## 2. ì—°ì‚°ì ì˜¤ë²„ë¡œë”©

```cpp
// Vector.h
class Vector
{
    public:
        Vector operator+(const Vector& rhs) const;
        // ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ëŠ” ë‚˜ ìì‹ , ê·¸ë‹¤ìŒ ì—°ì‚°ì, ê·¸ë¦¬ê³  ë‹¤ë¥¸ ë²¡í„°ê°€ ë‘ë²ˆì§¸
    private:
        int mX;
        int mY;
};

// Vector.cpp
Vector Vector::operator+(const Vector& rhs) const
{
    Vector sum;
    sum.mX = mX + rhs.mX;
    sum.mY = mY + rhs.mY;

    return sum;
}

// main.cpp
Vector v1(10, 10);
Vector v2(3, 17);
Vector sum = v1 + v2;               // <- ì—¬ê¸°ì„œ ì—°ì‚°ì ì˜¤ë²„ë¡œë”©
Vector sum = v1.operator+(v2);      // ìœ„ì™€ ë™ì¼!

std::cout << number;
std::cout.operator<<(number);       // ìœ„ì™€ ë™ì¼
```

### 2-1. friend í‚¤ì›Œë“œ

```cpp
void operator<<(std::ostream& os, const Vector& rhs)
{
    os << rhs.mX << ", " << rhs.mY;
}
```

ìœ„ ì½”ë“œì—ëŠ” ë¬¸ì œì ì´ ìˆìŒ.  
- ì´ ì „ì—­í•¨ìˆ˜ë¥¼ ì–´ë””ì— ë„£ì§€?
- ì´ í•¨ìˆ˜ê°€ Vector í´ë˜ìŠ¤ì˜ private ë©¤ë²„ë³€ìˆ˜ë¥¼ ì–´ë–»ê²Œ ì½ì§€?

> ğŸ’¡ friend í•¨ìˆ˜ë¥¼ ì“°ë©´ ëœë‹¤!

- í´ë˜ìŠ¤ ì •ì˜ ì•ˆì— friend í‚¤ì›Œë“œë¥¼ ì‚¬ìš© ê°€ëŠ¥
  - ë‹¤ë¥¸ í´ë˜ìŠ¤ë‚˜ í•¨ìˆ˜ê°€ ë‚˜ì˜ private ë˜ëŠ” protected ë©¤ë²„ì— ì ‘ê·¼ í•  ìˆ˜ ìˆê²Œ í—ˆìš©
  ```cpp
  // X.h
  class X
  {
    private:
        int mPrivateInt;
  }

  // Y.h
  #include "x.h"
  class Y
  {
    public:
        void Foo(X& x);
  }

  // Y.cpp
  void Y::Foo(X& x)
  {
    x.mPrivateInt += 10;        // ì»´íŒŒì¼ ì—ëŸ¬
  }
  ```

  ê³ ì¹˜ë ¤ë©´...

  ```cpp
  // X.h
  class X
  {
    friend class Y;     // <------- ì´ë ‡ê²Œ ì¹œêµ¬ë¼ê³  ì„ ì–¸!
    
    private:
        int mPrivateInt;
  }
  ```

ì´ë˜ì„œ friendëŠ” oop ì•ˆí‹° íŒ¨í„´ì´ë¼ê³ ë„ í•¨... ì™¸ë¶€ì—ì„œ ì“°ê²Œ í•´ì£¼ë‹ˆê¹Œ.  

#### friend í•¨ìˆ˜ë„ ìˆìŒ

```cpp
// X.h
class X
{
    friend void Foo(X& x);  // <----- ì´ë ‡ê²Œ friend ì¨ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ í•¨
    
    private:
        int mPrivateInt;
}

// GlobalFunction.cpp
void Foo(X& x)
{
    x.mPrivateInt += 10;
}
```

- friend í•¨ìˆ˜ëŠ” <b>ë©¤ë²„ í•¨ìˆ˜ê°€ ì•„ë‹˜!</b>
- í•˜ì§€ë§Œ ë‹¤ë¥¸ í´ë˜ìŠ¤ì˜ private ë©¤ë²„ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŒ. ê¶Œí•œì„ ì£¼ëŠ”ê±°ì„.  

#### ì´ê²Œ ì •ë§ ì˜¬ë°”ë¥¸ê°€ìš”?

```cpp
void operator<<(std::ostream& os, const Vector& rhs);

std::cout << vector1 << std::endl;      // ì»´íŒŒì¼ ì—ëŸ¬
```

ì™œ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë‚˜ëƒë©´,  
cout << vector1 í•´ì„œ ë°˜í™˜ë˜ëŠ” ê°’ì„ ë°›ì•„ì„œ ë˜ endlì´ í˜¸ì¶œì´ ë˜ëŠ” êµ¬ì¡°ì¸ë°,  
<< ì˜¤í¼ë ˆì´í„°ëŠ” ë°˜í™˜í˜•ì´ voidì„... ë°›ì„ ê²Œ ì—†ìœ¼ë‹ˆ ì—ëŸ¬ê°€ ë‚¨.  

```cpp
// ì´ë ‡ê²Œ ê³ ì³ì£¼ë©´ ë¨!
std::ostream& operator<<(std::ostream& os, const Vector& rhs);

std::ostream& operator<<(std::ostream& os, const Vector& rhs)
{
    os << rhs.mX << ", " << rhs.mY;

    return os;      // <- ìš”ë ‡ê²Œ ë°˜í™˜!
}

std::cout << vector1 << std::endl;      
```

### 2-2. ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ê³¼ const

- const ë¥¼ ì“°ëŠ” ì´ìœ ?
  - ë©¤ë²„ ë³€ìˆ˜ì˜ ê°’ì´ ë°”ë€ŒëŠ” ê²ƒì„ ë°©ì§€
  - ìµœëŒ€í•œ ë§ì€ ê³³ì— constë¥¼ ë¶™ì¼ ê²ƒ!

- const &ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ?
  - ë¶ˆí•„ìš”í•œ ê°œì²´ì˜ ì‚¬ë³¸ì´ ìƒê¸°ëŠ” ê²ƒì„ ë°©ì§€
  - ë©¤ë²„ ë³€ìˆ˜ê°€ ë°”ë€ŒëŠ” ê²ƒë„ ë°©ì§€
  ```cpp
  Vector operator+(const Vector& rhs) const;
  ```

