---
title:  "í…œí”Œë¦¿ (Template) í”„ë¡œê·¸ë˜ë°"

categories:
  - Cpp
tags:
  - [Cpp, C++, Template]

toc: true
toc_sticky: true
 
date: 2023-12-04
last_modified_at: 2023-12-04
---

<br>

> ğŸ¤¯ ì–¸ë¦¬ì–¼ì„ í•˜ê¸° ìœ„í•´ C++ ê¸°ì–µ ë˜ì‚´ë¦¬ê¸° í”„ë¡œì íŠ¸

# í…œí”Œë¦¿ (Template) í”„ë¡œê·¸ë˜ë°

- í…œí”Œë¦¿ì´ë€?
  - javaì™€ c#ì—ì„œì˜ ì œë„¤ë¦­(generic) ë©”ì„œë“œ/í´ë˜ìŠ¤ì™€ ë¹„ìŠ· (T)
  - STL ì»¨í…Œì´ë„ˆ ë˜í•œ í…œí”Œë¦¿
  - ë•ë¶„ì— ì½”ë“œë¥¼ ìë£Œí˜•ë§ˆë‹¤ ì¤‘ë³µìœ¼ë¡œ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ë¨

## 1. í•¨ìˆ˜ í…œí”Œë¦¿

```cpp
// Main.cpp
#include <vector>

int main()
{
    std::vector<int> scores;            // vector<int> ìš”ê²Œ ë°”ë¡œ í…œí”Œë¦¿ í”„ë¡œê·¸ë˜ë°
                                        // ì»´íŒŒì¼ì‹œì— ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ ì½”ë“œë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ê²ƒ
    scores.push_back(10);
    scores.push_back(50);

    return 0;
}
```

### 1-1. ë‘ ì •ìˆ˜ ë”í•˜ê¸°

```cpp
// MyMath.h ------------------------
template <typename T>           // ë˜ëŠ” template <class T>
T Add(T a, T b)
{
    return a + b;
}

// Main.cpp ------------------------
#include "MyMath.h"
int main()
{
    std::cout << Add<int>(3, 10) << std::endl;
    std::cout << Add<float>(3.14f, 10.14f) << std::endl;
    
    return 0;
}
```

- í•¨ìˆ˜ í…œí”Œë¦¿ì„ í˜¸ì¶œí•  ë• í…œí”Œë¦¿ ë§¤ê°œë³€ìˆ˜ë¥¼ ìƒëµí•  ìˆ˜ ìˆìŒ
  ```cpp
  Add<int>(3, 10);
  Add(3, 10);                   // intë¼ê³  ì¶”ì¸¡ ê°€ëŠ¥í•´ì„œ í•¨ìˆ˜ ëˆë‹¤
  ```

### 1-2. typename vs class

`template <typename T>` or `template <class T>`

- ì‹¤ì§ˆì ì¸ ì°¨ì´ëŠ” ì—†ìŒ
- ê·¸ëƒ¥ typenameì„ ì“°ì

### 1-3. í…œí”Œë¦¿ì€ ì–´ë–»ê²Œ ì‘ë™í• ê¹Œ?

- í…œí”Œë¦¿ì„ ì¸ìŠ¤í„´ìŠ¤í™” í•  ë•Œ ë§ˆë‹¤ ì»´íŒŒì¼ëŸ¬ê°€ ë‚´ë¶€ì ìœ¼ë¡œ ì½”ë“œ ìƒì„±
  - Tì— ë§¤ê°œë³€ìˆ˜ë¥¼ ë„£ì–´ì„œ ì“°ê¸° ì‹œì‘í•  ë•Œ ë§ˆë‹¤.
- í…œí”Œë¦¿ì— ë„£ëŠ” ìë£Œí˜• ê°€ì§“ìˆ˜ì— ë¹„ë¡€í•´ì„œ exe íŒŒì¼ í¬ê¸° ì¦ê°€
- ì»´íŒŒì¼ ë„ì¤‘ì— ë‹¤í˜•ì„±ì„ ë¶€ì—¬í•  ìˆ˜ ìˆìŒ

```cpp
// MyMath.h ------------------------
template <typename T>
T Add(T a, T b)
{
    return a + b;
}

// Main.cpp ------------------------
#include "MyMath.h"

int Add(int a, int b)
{
    // ì˜ˆì‹œ í•¨ìˆ˜
    // ì»´íŒŒì¼ ë„ì¤‘ì— ì»´íŒŒì¼ëŸ¬ê°€ ì½”ë“œë¥¼ ìƒì„±í•œë‹¤ëŠ” ê²ƒì„ ë³´ì—¬ì£¼ëŠ” ì˜ˆì‹œ
    // ê·¸ë˜ì„œ ë°˜í™˜í˜•ì´ int
    return a + b;
}

float Add(float a, float b)
{
    // ì˜ˆì‹œ í•¨ìˆ˜
    // ì»´íŒŒì¼ ë„ì¤‘ì— ì»´íŒŒì¼ëŸ¬ê°€ ì½”ë“œë¥¼ ìƒì„±í•œë‹¤ëŠ” ê²ƒì„ ë³´ì—¬ì£¼ëŠ” ì˜ˆì‹œ
    // ê·¸ë˜ì„œ ë°˜í™˜í˜•ì´ float
    return a + b;
}

int main()
{
    int resultInt = Add<int>(3, 10);            // í…œí”Œë¦¿ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ, ì»´íŒŒì¼ëŸ¬ê°€ ì½”ë“œë¥¼ ìƒì„±í•˜ê²Œ ë¨
    float resultFloat = Add<float>(3.14f, 10.14f);
}
```



## 2. í´ë˜ìŠ¤ í…œí”Œë¦¿

```cpp
// MyArray.h ------------------------
#pragma once
template<typename T>                // í´ë˜ìŠ¤ í…œí”Œë¦¿ì´ì•¼~ Tì— ë”°ë¼ ë°˜í™˜í˜• ë°”ë€Œì–´~
class MyArray                   
{
    public:
        bool Add(T data);           // T dataë¥¼ ë„£ì„ê±°ë‹¤
        MyArray();
    private:
        enum { MAX = 3 };
        int mSize;
        T mArray[MAX];              // Tí˜•ì˜ ë°ì´í„° 3ê°œë§Œí¼ ë°°ì—´ ë§Œë“¤ì
};

// MyArray.cpp ----------------------
#include "MyArray.h"

template<typename T>
bool MyArray<T>::Add(T data)        // í…œí”Œë¦¿ í´ë˜ìŠ¤ í•¨ìˆ˜ ì‘ì„±í•  ë•Œ cppì— :: ì´ë ‡ê²Œ ì‘ì„±í•´ì•¼ í•œë‹¤ëŠ” ê±° ëª…ì‹¬!
{
    if (mSize >= MAX)
    {
        return false;
    }
    mArray[mSize++] = data;
    return true;
}

template<typename T>
MyArray<T>::MyArray()               
    : mSize(0)                      // ìƒì„±ì. í…œí”Œë¦¿í™” ëœ MyArray í´ë˜ìŠ¤.
{

}

// Main.cpp -------------------------
#include "MyArray.h"
int main()
{
    MyArray<int> scores;
    
    scores.Add(10);
    scores.Add(20);
    scores.Add(30);             // ì—¬ê¸°ê¹Œì§€ ë‹¤ TRUE ë°˜í™˜ì´ì§€ë§Œ
    scores.Add(40);             // FALSE ë°˜í™˜ (size ì´ˆê³¼)

    return 0;
}
```

> <b>ê·¼ë° ìœ„ì˜ ì½”ë“œë¥¼ ì»´íŒŒì¼ í•˜ë©´ ì—ëŸ¬ê°€ ë‚œë‹¤...!</b>
> 'ì°¾ì„ ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ì‹¬ë³¼' ì–´ì©Œê³  í•˜ë©´ì„œ.  

- ì»´íŒŒì¼ëŸ¬ê°€ `Main.cpp` ë¥¼ ì»´íŒŒì¼í•  ë•Œ, `MyArray.cpp` ë¥¼ ëª» ì°¾ìŒ.
  - `MyArray.h` ë¥¼ í†µí•´ì„œ ì˜¤ì§ `MyArray` í´ë˜ìŠ¤ ì„ ì–¸ë§Œ ë³¼ ìˆ˜ ìˆìŒ;
  - êµ¬í˜„ì²´ëŠ” `MyArray.cpp` ì— ìˆìœ¼ë¯€ë¡œ ì°¾ì§ˆ ëª»í•¨
  - í—¤ë”ì™€ cppëŠ” ë”°ë¡œ ì»´íŒŒì¼ ë˜ê¸° ë•Œë¬¸ì—, ì»´íŒŒì¼ ì¤‘ì—” ì°¾ì„ ìˆ˜ ì—†ì–´ìš”
  - ê·¸ë˜ì„œ ì»´íŒŒì¼ëŸ¬ê°€ intí˜•ìœ¼ë¡œ êµ¬í˜„ë˜ëŠ” MyArray<int>ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
- ë”°ë¼ì„œ ì»´íŒŒì¼ëŸ¬ê°€ `MyArray<int>` ë¥¼ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ì—†ìŒ...

> ğŸ’¡ <b>í´ë˜ìŠ¤ í…œí”Œë¦¿ êµ¬í˜„ ì‹œ, í—¤ë” ë¶€ë¶„ì— êµ¬í˜„ì²´ë¥¼ ì˜®ê²¨ì•¼ í•œë‹¤!</b>

```cpp
// MyArray.h

template<typename T>
class MyArray
{
    public:
        bool Add(T data);
        MyArray();
    private:
        enum { MAX = 3 };
        int mSize;
        T mArray[MAX];
};

template<typename T>
inline bool MyArray<T>::Add(T data)
{
    return false;
}

template<typename T>
inline MyArray<T>::MyArray()
    : mSize(0)
{

}
```

ì´ë ‡ê²Œ í—¤ë” ë¶€ë¶„ì— êµ¬í˜„ì²´ë¥¼ ì ì–´ë‘ë©´,  
ì»´íŒŒì¼ëŸ¬ê°€ í™•ì¸í•˜ê³  ë°”ê¿”ì¤€ë‹¤.  

ë‹¤ë§Œ ì´ë ‡ê²Œ í•  ê²½ìš° í¬ê¸°ë„ ëŠ˜ì–´ë‚˜ê³ , ì»´íŒŒì¼ ì†ë„ê³  ëŠë ¤ì§„ë‹¤.  
í—¤ë”ëŠ” ì—¬ê¸°ì €ê¸° ì“°ì´ê¸° ë•Œë¬¸...  

### 2-1. ê°œì²´ë¥¼ ì„ ì–¸í•  ë•Œ í…œí”Œë¦¿ ë§¤ê°œë³€ìˆ˜ë¥¼ ëª…ì‹œí•´ì•¼ í•¨

```cpp
MyArray<int> scores;            // ì—ëŸ¬ ì•ˆë‚¨
MyArray scores;                 // ì—ëŸ¬
```

ì»´íŒŒì¼ëŸ¬ê°€ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì—ëŸ¬ê°€ ë‚œë‹¤.  
í•¨ìˆ˜ëŠ” í˜¸ì¶œí•  ë•Œ ë§¤ê°œë³€ìˆ˜ì—ì„œ ì¶”ì¸¡í•  ìˆ˜ ìˆëŠ”ë°,  
í´ë˜ìŠ¤ëŠ” ì•„ë‹ˆê¸° ë•Œë¬¸.  



## 3. í…œí”Œë¦¿ ë°°ì—´

```cpp
// MyArray.h ----------------------

template<typename T>
class MyArray
{
    public:
        MyArray();

        bool Add(const T& data);            // T ëŠ” ì–´ë–¤ íƒ€ì…ë„ ë  ìˆ˜ ìˆìŒ.
                                            // ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ ì—„ì²­ í°, 10mb ì •ë„ì˜ ì˜¤ë¸Œì íŠ¸ íƒ€ì…ë„ ë  ìˆ˜ ìˆìŒ
                                            // ê·¸ê±° ë‹¤ ë³µì‚¬í•˜ê¸° ì«Œ ê·¸ëŸ¬ë¯€ë¡œ, ì°¸ì¡°ë¡œ ë°›ìŒ!
                                            // ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•  ë•Œ ë§Œí¼ì€ ì°¸ì¡°ë¡œ ë°›ê² ë‹¤~
        size_t GetSize() const;
    private:
        enum { MAX = 3 };
        size_t mSize;                       
        T mArray[MAX];                      
};

template<typename T>
MyArray<T>::MyArray()                       // í…œí”Œë¦¿í™” ëœ í´ë˜ìŠ¤ë‹ˆê¹Œ, ì´ë ‡ê²Œ MyArray<T>:: ë¶™ì—¬ì¤˜ì•¼ í•¨!
    : mSize(0)
{

}

template<typename T>
size_T MyArray<T>::GetSize() const
{
    return mSize;
}

template<typename T>
bool MyArray<T>::Add(const T& data)
{
    if (mSize >= MAX)
    {
        return false;
    }

    mArray[mSize++] = data;

    return true;
}

// MyArraySample.cpp ----------------------
void MyArrayExample()
{
    MyArray<int> scores;
    scores.Add(10);
    scores.Add(50);

    std::cout << "scores - Size: " << scores.GetSize() << std::endl;

    MyArray<IntVector> intVectors;          // í´ë˜ìŠ¤ í…œí”Œë¦¿ì€ ì˜¤ë¸Œì íŠ¸ íƒ€ì…ë„ ë  ìˆ˜ ìˆë‹¤! IntVector
    intVectors.Add(IntVector(1, 1));
    intVectors.Add(IntVector(5, 3));

    std::cout << "intVectors - Size: " << intVectors.GetSize() << std::endl;

    MyArray<IntVector*> intVectors2;        // í¬ì¸í„° ë‹´ì„ ë•Œ ì˜ˆì‹œ
    IntVector* intVector = new IntVector(3, 2);
    intVectors2.Add(intVector);

    std::cout << "intVectors2 - Size: " << intVectors2.GetSize() << std::endl;

    delete intVector;
}
```



## 4. í´ë˜ìŠ¤ í…œí”Œë¦¿ íŠ¸ë¦­

```cpp
// FixedVector.h
// ë²¡í„° ì“°ê³  ì‹¶ì€ë°, ì‚¬ì´ì¦ˆê°€ ëŠ˜ì–´ë‚˜ì§€ ì•Šì•˜ìœ¼ë©´ ì¢‹ê² ë‹¤!
// ê·¸ë˜ì„œ ë‚˜ë§Œì˜ ë²¡í„°ë¥¼ ë§Œë“  ê²ƒ. íƒ€ì…ë§ˆë‹¤ ë§Œë“¤ì§€ ì•Šê¸° ìœ„í•´ í…œí”Œë¦¿í™” í–ˆë‹¤.

template<typename T, size_t N>
class FixedVector
{
    public:
        // public ë©”ì„œë“œë“¤
    private:
        T mArray[N];
};

// main.cpp
FixedVector<int, 16> numbers;
```



## 5. ë‘ ê°œì˜ í…œí”Œë¦¿ ë§¤ê°œë³€ìˆ˜

```cpp
template<typename T, typename U>
void Print(const T& a, const U& b)
{
    std::cout << a << " / " << b << std::endl;
}

template<typename T, typename U>
class MyClass
{
    private:
        T mX;
        U mY;
}
```



## 6. í…œí”Œë¦¿ íŠ¹ìˆ˜í™” (Specialization)

í…œí”Œë¦¿(c#ì—ì„  ì œë„¤ë¦­)ì€ ì¦‰ ì¼ë°˜í™” ê°™ì€ ê²ƒì´ë‹¤.  
ë˜‘ê°™ì´ ë§Œë“¤ì–´ì•¼ ë˜ëŠ” ì—¬ëŸ¬ í´ë˜ìŠ¤ë¥¼ ë²”ìš©ì ìœ¼ë¡œ ë­‰ì³ì„œ í•˜ë‚˜ë¡œ ë§Œë“œëŠ” ê²ƒì´ë‹¤.  

íŠ¹ìˆ˜í™”ë€ íŠ¹ë³„í•œ ê²½ìš°ë¥¼ ìœ„í•œ íŠ¹ë³„í•œ í•˜ë‚˜ë¥¼ ë§Œë“œëŠ” ê²ƒì´ë‹¤.  
ì“°ì¼ ì¼ì€ ì˜ ì—†ì§€ë§Œ...  

- íŠ¹ì •í•œ í…œí”Œë¦¿ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ë„ë¡ í…œí”Œë¦¿ ì½”ë“œë¥¼ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆ
  ```cpp
  template <class T, class Allocator>
  class std::vector<T, Allocator> {}            // ëª¨ë“  í˜•ì„ ë°›ëŠ” ì œë„¤ë¦­ vector

  template <class Allocator>
  class std::vector<bool, Allocator>            // boolì„ ë°›ë„ë¡ íŠ¹ìˆ˜í™”ëœ vector
  ```

- ì „ì²´ í…œí”Œë¦¿ íŠ¹ìˆ˜í™”
  - í…œí”Œë¦¿ ë§¤ê°œë³€ìˆ˜ ë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ ìˆìŒ


  ```cpp
  template<typename VAL, typename EXP>
  VAL Power(const VAL value, EXP exponent) {}   // ëª¨ë“  í˜•ì„ ë°›ëŠ” ì œë„¤ë¦­ power

  template<>                                    // ë¹„ì–´ ìˆìŒ! ëª¨ë‘ ë‚´ê°€ íŠ¹ì •í•œ íƒ€ì…ë§Œì„ ë°›ë„ë¡ í•˜ê² ë‹¤.
  float Power(float value, float exp)           // floatí˜•ì„ ë°›ë„ë¡ íŠ¹ìˆ˜í™”
  ```
  
- ë¶€ë¶„ í…œí”Œë¦¿ íŠ¹ìˆ˜í™”
  ```cpp
  template <class T, class Allocator>
  class std::vector<T, Allocator> {}            // ëª¨ë“  í˜•ì„ ë°›ëŠ” ì œë„¤ë¦­

  tempalte <class Allocator>
  class std::vector<bool, Allocator>            // bool ì„ ë°›ë„ë¡ íŠ¹ìˆ˜í™”
  ```