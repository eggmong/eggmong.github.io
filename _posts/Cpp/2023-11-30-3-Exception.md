---
title:  "ì˜ˆì™¸ (Exception)"

categories:
  - Cpp
tags:
  - [Cpp, C++, exception]

toc: true
toc_sticky: true
 
date: 2023-11-30
last_modified_at: 2023-11-30
---

<br>

> ğŸ¤¯ ì–¸ë¦¬ì–¼ì„ í•˜ê¸° ìœ„í•´ C++ ê¸°ì–µ ë˜ì‚´ë¦¬ê¸° í”„ë¡œì íŠ¸

# ì˜ˆì™¸ (Exception)

C++ì—ì„œë„ ì˜ˆì™¸ë¥¼ 'ì§€ì›'í•˜ê¸´ í•˜ë‚˜, ìµì…‰ì…˜ í•¸ë“¤ë§ì˜ ì¤‘ìš”ì„±ì´ ë–¨ì–´ì§.  
C++ ì˜ ì˜ˆì™¸ëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ë§Œë“  ê²ƒ, ì–¸ì–´ ìì²´ì—ì„œ ìµì…‰ì…˜ì„ ë˜ì ¸ì£¼ì§„ ì•ŠìŒ.  
std::exception ì´ ìµœìƒìœ„ ë¶€ëª¨ í´ë˜ìŠ¤ì¸ë°, ì´ê±¸ ìƒì†ë°›ì•„ ì‚¬ìš©í•˜ëŠ” ê²ƒ.  

## 1. ì˜ˆì™¸ ë°œìƒ ì‚¬ë¡€ 1 : ë²”ìœ„ ì´íƒˆ

```cpp
#include <exception>

int main()
{
    std::string myCatName = "Coco";

    try
    {
        char ch = myCatName.at(5);          // <- ìµì…‰ì…˜ ë°œìƒ
    }
    catch (const std::out_of_range& e)
    {
        // ë²”ìœ„ ì´íƒˆ ë°œìƒ
        std::cerr << "out of range : " << e.what() << std:: endl;
    }
    catch (const std::exception& e)
    {
        // ìœ„ì—ì„œ ìºì¹˜í•˜ì§€ ëª»í•œ ìµì…‰ì…˜ ì „ë¶€ ìºì¹˜
        std::cerr << "exception : " << e.what() << std::endl;
    }

    return 0;
}
```

ê·¸ëŸ°ë° êµ³ì´ ìµì…‰ì…˜ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•˜ëŠëƒ?  

```cpp
std::string myCatName = "Coco";

const size_t INDEX = 5;
if (INDEX < myCatName.size())
{
    char ch = myCatName.at(INDEX);
    // ì´ë ‡ê²Œ ifë¬¸ìœ¼ë¡œ ì²˜ë¦¬í•´ë„ ë˜ì§€ìš”
}
```

## 2. ì˜ˆì™¸ ë°œìƒ ì‚¬ë¡€ 2 : 0ìœ¼ë¡œ ë‚˜ëˆ„ê¸°

```cpp
int number1 = 0;
int number2 = 0;

std::cin >> number1 >> number2;

try
{
    int result = number1 / number2;             // <- ìµì…‰ì…˜ì´ ë°œìƒí•˜ê¸´ í•˜ë‚˜ C++ì˜ ì˜ˆì™¸ê°€ ì•„ë‹˜
                                                // ìš´ì˜ì²´ì œê°€ í•´ì£¼ëŠ” ìµì…‰ì…˜...
                                                // 'ì •ì˜ë˜ì–´ ìˆëŠ” ìƒíƒœê°€ ì•„ë‹˜' ì´ë¼ê³  ëœ¬ë‹¤
}
catch (const std::exception& e)
{
    std::cerr << "exception: " << e.what() << std::endnl;
}
```

## 3. ì˜ˆì™¸ ë°œìƒ ì‚¬ë¡€ 3 : NULL ê°œì²´

```cpp
Cat* myCat = nullptr;
// ...

try
{
    const char* myCatName = myCat->GetName();           // ì´ê²ƒë„ C++ì˜ ì˜ˆì™¸ê°€ ì•„ë‹˜;;
                                                        // ìš´ì˜ì²´ì œì—ì„œ NULL ê°œì²´ ì°¸ì¡°í•˜ë©´ ìœ„í—˜í•˜ë‹ˆê¹Œ
                                                        // OSì—ì„œ ì¸í„°ëŸ½íŠ¸ ë°©ì‹ìœ¼ë¡œ ì‹œê·¸ë„ ì´ì£¼ëŠ” ê²ƒ
    std::cout << myCatName << std::endl;
}
catch (const std::exception& e)
{
    std::cerr << "exception : " << e.what() << std::endl;
}
```

êµ³ì´ ìµì…‰ì…˜ ì—†ì´ ì´ë ‡ê²Œ ì²˜ë¦¬í•´ë„ ë˜ì¥¬.

```cpp
Cat* myCat == new Cat(5, "Coco");
if (myCat == NULL)
{
    // ...
}
```

## 4. OS ì˜ˆì™¸, C++ ì˜ˆì™¸

- OS ì˜ˆì™¸
  - ë¹„ë™ê¸°ì 
  - ìœˆë„ìš°
    - êµ¬ì¡°ì  ì˜ˆì™¸ ì²˜ë¦¬ (SEH)
  - ë¦¬ëˆ…ìŠ¤
    - Faults, Traps, Aborts
  - í”Œë«í¼ë§ˆë‹¤ ë‹¤ë¦„
  - ì˜¤ë²„í—¤ë“œ ë¹„êµì  ë§ìŒ, ë” ëŠë¦¼
- std::exception
  - ë™ê¸°ì 
  - C++STL
  - ëª¨ë“  í”Œë«í¼ì— ê³µí†µ
  - ì˜¤ë²„í—¤ë“œê°€ ë¹„êµì  ì ìŒ

## 5. ìƒì„±ìì—ì„œ ì‚¬ìš©í•˜ëŠ” ì˜ˆì™¸

```cpp
Inventory::Inventory(int count)
{
    mSlots = new int[count];
}
```

> ğŸ’¡ mSlotsê°€ NULLì´ë¼ë©´ ? ì´ê²ƒì— ëŒ€í•œ í•´ê²° ë°©ë²•!

```cpp
// í•´ê²° ë°©ë²•
// Exceptions.h
#include <exception>

struct SlotNullException : public std::exception
{
    const char* what() const throw()
    {
        return "Slot is NULL";
    }
}

// Inventory.cpp
Inventory::Inventory(int slotCount)
{
    mSlots = new int[slotCount];
    if (mSlots == NULL)
    {
        throw SlotNullException();
    }
}
```

