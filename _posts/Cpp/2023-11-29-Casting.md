---
title:  "ìºìŠ¤íŒ… (Casting, í˜•ë³€í™˜)"

categories:
  - Cpp
tags:
  - [Cpp, C++, Casting, static_cast, reinterpret_cast, const_cast, dynamic_cast]

toc: true
toc_sticky: true
 
date: 2023-11-29
last_modified_at: 2023-11-29
---

<br>

> ğŸ¤¯ ì–¸ë¦¬ì–¼ì„ í•˜ê¸° ìœ„í•´ C++ ê¸°ì–µ ë˜ì‚´ë¦¬ê¸° í”„ë¡œì íŠ¸

# ìºìŠ¤íŒ… (Casting, í˜•ë³€í™˜)

- ì•”ì‹œì (implicit) ìºìŠ¤íŒ…
  - ì»´íŒŒì¼ëŸ¬ê°€ í˜•ì„ ë³€í™˜í•´ ì¤Œ
    - ë‹¨, í˜• ë³€í™˜ì´ í—ˆìš©ë˜ê³ 
    - í”„ë¡œê·¸ë˜ë¨¸ê°€ ëª…ì‹œì ìœ¼ë¡œ í˜• ë³€í™˜ì„ ì•ˆ í•  ê²½ìš°
  ```cpp
  int number1 = 3;
  long number2 = number1;       // ì•”ì‹œì  ìºìŠ¤íŒ…
  ```
- ëª…ì‹œì (Explicit) ìºìŠ¤íŒ…
  - í”„ë¡œê·¸ë˜ë¨¸ê°€ í˜• ë³€í™˜ì„ ìœ„í•œ ì½”ë“œ ì§ì ‘ ì‘ì„±
    - static_cast
    - const_cast
    - dynamic_cast (c++98, ëª¨ë˜ c++)
    - reinterpret_cast

## 1. ìŠ¤íƒœí‹± ìºìŠ¤íŒ… static_cast

ì •ì  ìºìŠ¤íŒ….  

```cpp
float number1 = 3.f;
int number2 = static_cast<int>(number1);        // <- ì´ê±°. ê°’ ë³€í™˜
Animal* myPet = new Cat(2, "Coco");
Cat* myCat = static_cast<Cat*>(myPet);          // <- ì´ê±°. í¬ì¸í„° ë³€í™˜
```

- ê°’
  - ë‘ ìˆ«ì í˜• ê°„ì˜ ë³€í™˜
    - ê°’ì„ ìœ ì§€ (ë‹¨, ë°˜ì˜¬ë¦¼ ì˜¤ì°¨ëŠ” ì œì™¸)
    - ì´ì§„ìˆ˜ í‘œê¸°ëŠ” ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ  
  
  ```cpp
  int number1 = 3;
  short number2 = static_cast<short>(number1);

  // int: 3 (0000 0000 0000 0011)
  // 3 (0000 0011)
  // ìˆ˜ëŠ” ë³€í•˜ì§€ ì•ŠìŒ. ë¹„íŠ¸ ìˆ˜ë§Œ ì¤„ì–´ë“¤ ë¿...
  ```

  ```cpp
  float number1 = 3.f;
  int number2 = static_cast<int>(number1);

  // float: 3.f (0100 0000 0100 0000)
  // int: 3 (0000 0000 0000 0011)
  ```
- ê°œì²´ í¬ì¸í„°
  - ë³€ìˆ˜í˜• ì²´í¬ í›„ ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ìì‹ í´ë˜ìŠ¤ë¡œ ë³€í™˜
    - ë„ˆë„¤ ë‘˜ì´ ì •ë§ ìƒì† ê´€ê³„ê°€ ìˆëŠ”ì§€? ì²´í¬ í•œë‹¤ëŠ” ê²ƒ
  - ì»´íŒŒì¼ ì‹œì—ë§Œ í˜• ì²´í¬ ê°€ëŠ¥
    - ê·¸ë˜ì„œ ì •ì ì´ë¼ëŠ” ê²ƒ
  - ì‹¤í–‰ ë„ì¤‘ í¬ë˜ì‹œ ê°€ëŠ¥ì„± ìˆìŒ
  - ì˜ˆì‹œ 1
  ```cpp
  Animal* myPet = new Cat(2, "Coco");
  Cat* myCat = static_cast<Cat*>(myPet);        // ë‹¹ì—°íˆ ë¨. ìƒì† ê´€ê³„ë‹ˆê¹Œ.
  Dog* myDog = static_cast<Dog*>(myPet);        // ì»´íŒŒì¼ì€ ë¨.
                                                // ì»´íŒŒì¼ëŸ¬ê°€ ì²´í¬í•˜ëŠ” ê±´ Dogì™€ Animalê°„ì˜ ìƒì† ê´€ê³„ê°€ ìˆëŠëƒëŠ” ê²ƒ ë¿.
                                                // ê·¸ë˜ì„œ ìºìŠ¤íŒ…ì€ í•´ì£¼ëŠ”ë°, myDogì€ ì‚¬ì‹¤ Catì´ë‹ˆê¹Œ
  myDog->GetDogHouseName();                     // Dogì— ìˆëŠ” í•¨ìˆ˜ í˜¸ì¶œ í•´ì£¼ë©´ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆìŒ. í•¨ìˆ˜ ìì²´ê°€ ì—†ìœ¼ë‹ˆ
  ```  
  
  - ì˜ˆì‹œ 2  

  ```cpp
  Animal* myPet = new Cat(2, "Coco");

  House* myHouse = static_cast<House*>(myPet);          // ì»´íŒŒì¼ ì—ëŸ¬
  myHouse->GetAddress();                                // Houseí•˜ê³  Catì€ ì•„ë¬´ëŸ° ìƒì† ê´€ê³„ê°€ ì—†ì–´;
  ```
  

## 2. ë¦¬ì¸í„°í”„ë¦¬íŠ¸ ìºìŠ¤íŒ… (Reinterpret_cast)

```cpp
Animal* myPet = new Cat(2, "Coco");
unsigned int myPetAddr = reinterpret_cast<unsigned int>(myPet); // <- ì´ê±°

cout << "" << hex << myPet << endl;
```

## 3. ì»¨ìŠ¤íŠ¸ ìºìŠ¤íŒ… (const_cast)



```cpp
void Foo(const Animal* ptr)     // <- ì´ê±°
{
    Animal* animal = const_cast<Animal*>(ptr);      // <- ì´ê±°
    animal->SetAge(5);
}
```

## 4. ë™ì  ìºìŠ¤íŒ… (dynamic_cast)

ì‹¤í–‰ì¤‘ì´ ë˜ëŠ”ê±°ë‹¤~

```cpp
Cat* myCat = dynamic_cast<Cat*>(myPet);
```